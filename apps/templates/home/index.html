<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <title>Krishi Mitra</title>

    <meta
      content="width=device-width, initial-scale=1.0, shrink-to-fit=no"
      name="viewport"
    />
    <link rel="icon" href="/static/assets/img/icon.ico" type="image/x-icon" />

    <!-- Fonts and icons -->
    <script src="/static/assets/js/plugin/webfont/webfont.min.js"></script>
    <script>
      WebFont.load({
          <div class="col-md-12">
      					<div class="card full-height">
      						<div class="card-body">
                        <div class="tomorrow"
                           data-location-id="133012"
                           data-language="EN"
                           data-unit-system="METRIC"
                           data-skin="light"
                           data-widget-type="upcoming"
                           style="padding-bottom:22px;position:relative;"
                        >
                          <a
                            href="https://www.tomorrow.io/weather-api/"
                            rel="nofollow noopener noreferrer"
                            target="_blank"
                            style="position: absolute; bottom: 0; transform: translateX(-50%); left: 50%;"
                          >
                          </a>
                        </div>
      					</div>
      				</div>
      			</div>
      	google: {"families":["Lato:300,400,700,900"]},
      	custom: {"families":["Flaticon", "Font Awesome 5 Solid", "Font Awesome 5 Regular", "Font Awesome 5 Brands", "simple-line-icons"],
      	urls: ['/static/assets/css/fonts.min.css']},
      	active: function() {
      		sessionStorage.fonts = true;
      	}
      });
    </script>

    <!-- CSS Files -->
    <link rel="stylesheet" href="/static/assets/css/bootstrap.min.css" />
    <link rel="stylesheet" href="/static/assets/css/atlantis.min.css" />

    <!-- CSS Just for demo purpose, don't include it in your project -->
    <link rel="stylesheet" href="/static/assets/css/demo.css" />
  </head>
  <body>
    <div class="wrapper">
      {% include 'includes/navigation.html' %} 
      {% include'includes/sidebar1.html' %}
      <div
        class="modal fade"
        id="exampleModalCenter"
        tabindex="-1"
        role="dialog"
        aria-labelledby="exampleModalCenterTitle"
        aria-hidden="true"
        data-backdrop="static"
      >
        <div class="modal-dialog modal-dialog-centered" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLongTitle">
                Welcome To Krishi Mitra Portal
              </h5>
              <button
                type="button"
                class="close"
                data-dismiss="modal"
                aria-label="Close"
              >
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <div class="card-title">Please Select Location</div>
              <div class="col-md-12">
                <div class="form-group">
                  <label for="stateSelect">Select State: </label>
                  <select class="form-control form-control" id="stateSelect">
                    
                  </select>
                </div>
              </div>
              <div class="col-md-12">
                <div class="form-group">
                  <label for="districtSelect">Select District: </label>
                  <select class="form-control form-control" id="districtSelect">
                
                  </select>
                </div>
              </div>
            </div>
            <div class="modal-footer">
              <button
                type="button"
                class="btn btn-primary"
                data-dismiss="modal"
              >
                Continue
              </button>
            </div>
          </div>
        </div>
      </div>

      <div class="main-panel">
        <div class="content">
          <div class="panel-header bg-primary-gradient">
            <div class="page-inner py-5">
              <div
                class="d-flex align-items-left align-items-md-center flex-column flex-md-row"
              >
                <div>
                  <h2 class="text-white pb-2 fw-bold">
                    Krishi Mitra Dashboard
                  </h2>
                  <h5 class="text-white op-7 mb-2">
                    Farmers feed us, its our time to show gratitude
                  </h5>
                </div>
                <div class="ml-md-auto py-2 py-md-0">
                  <a href="#" class="btn btn-white btn-border btn-round mr-2"
                    >Manage</a
                  >
                  <a href="#" class="btn btn-secondary btn-round"
                    >Add Customer</a
                  >
                </div>
              </div>
            </div>
          </div>
          <div class="page-inner mt--5">
            <div class="col-md-12">
              <div class="card full-height">
                <div class="card-body">
                  <div
                    class="tomorrow"
                    data-location-id="133012"
                    data-language="EN"133012
                    data-unit-system="METRIC"
                    data-skin="light"
                    data-widget-type="upcoming"
                    style="padding-bottom: 22px; position: relative"
                  >
                  
                  </div>
                </div>
              </div>
            </div>
            <div class="row mt--2">
              <div class="col-md-12">
                <div class="card">
                  <div class="card-header">
                    <div class="card-head-row">
                      <div class="card-title">Krishi Mitra</div>
                    </div>
                  </div>
                  <!--<div class="col-md-6">
                  <div class="card">User
                    <div class="card-header">
                      <div class="card-title">Bar Chart</div>
                    </div> -->
                  <div class="card-body">
                    <div class="chart-container">
                      <canvas id="barChart"></canvas>
                    </div>
                  </div>
                  <!-- </div>
                </div> -->
                </div>
              </div>
            </div>
            <!-- <div class="row"> -->
            <div class="row-full-height">
              <div class="col-md-12">
                <div class="card">
                  <div class="card-header">
                    <div class="card-title">Most Sold Crops</div>
                  </div>
                  <div class="card-body pb-0">
                    <div class="d-flex">
                      <div class="avatar">
                        <img
                          src="/static/assets/img/logoproduct3.svg"
                          alt="..."
                          class="avatar-img rounded-circle"
                        />
                      </div>
                      <div class="flex-1 pt-1 ml-2">
                        <h6 class="fw-bold mb-1">Tur</h6>
                        <small class="text-muted">Mukhya Bajar Peth | Nafed</small>
                      </div>
                      <div class="d-flex ml-auto align-items-center">
                        <h3 class="text-info fw-bold">₹ 5,780 per quintal</h3>
                      </div>
                    </div>
                    <div class="separator-dashed"></div>
                    <div class="d-flex">
                      <div class="avatar">
                        <img
                          src="/static/assets/img/logoproduct3.svg"
                          alt="..."
                          class="avatar-img rounded-circle"
                        />
                      </div>
                      <div class="flex-1 pt-1 ml-2">
                        <h6 class="fw-bold mb-1">Soya bean</h6>
                        <small class="text-muted">Jilha Bajar | Nafed</small>
                      </div>
                      <div class="d-flex ml-auto align-items-center">
                        <h3 class="text-info fw-bold">₹ 2,820 per quintal</h3>
                      </div>
                    </div>
                    <div class="separator-dashed"></div>
                    <div class="d-flex">
                      <div class="avatar">
                        <img
                          src="/static/assets/img/logoproduct3.svg"
                          alt="..."
                          class="avatar-img rounded-circle"
                        />
                      </div>
                      <div class="flex-1 pt-1 ml-2">
                        <h6 class="fw-bold mb-1">Bengal Gram</h6>
                        <small class="text-muted">Sanity Market | Nafed</small>
                      </div>
                      <div class="d-flex ml-auto align-items-center">
                        <h3 class="text-info fw-bold">₹ 2,820 per quintal</h3>
                      </div>
                    </div>
                    <div class="separator-dashed"></div>
                    <div class="pull-in">
                      <canvas id="topProductsChart"></canvas>
                    </div>
                  </div>
				  </div>
                </div>
              </div>
            </div>
            <div class="row">
             
              <div class="col-md-6">
                <div class="card full-height">
                  <div class="card-header">
                    <div class="card-head-row">
                      <div class="card-title">Support Tickets</div>
                      <div class="card-tools">
                        <ul
                          class="nav nav-pills nav-secondary nav-pills-no-bd nav-sm"
                          id="pills-tab"
                          role="tablist"
                        >
                          <li class="nav-item">
                            <a
                              class="nav-link"
                              id="pills-today"
                              data-toggle="pill"
                              href="#pills-today"
                              role="tab"
                              aria-selected="true"
                              >Today</a
                            >
                          </li>
                          <li class="nav-item">
                            <a
                              class="nav-link active"
                              id="pills-week"
                              data-toggle="pill"
                              href="#pills-week"
                              role="tab"
                              aria-selected="false"
                              >Week</a
                            >
                          </li>
                          <li class="nav-item">
                            <a
                              class="nav-link"
                              id="pills-month"
                              data-toggle="pill"
                              href="#pills-month"
                              role="tab"
                              aria-selected="false"
                              >Month</a
                            >
                          </li>
                        </ul>
                      </div>
                    </div>
                  </div>
                  <div class="card-body">
                    <div class="d-flex">
                      <div class="avatar avatar-online">
                        <span
                          class="avatar-title rounded-circle border border-white bg-info"
                          >J</span
                        >
                      </div>
                      <div class="flex-1 ml-3 pt-1">
                        <h6 class="text-uppercase fw-bold mb-1">
                          Joko Subianto
                          <span class="text-warning pl-3">pending</span>
                        </h6>
                        <span class="text-muted"
                          >I am facing some trouble with my viewport. When i
                          start my</span
                        >
                      </div>
                      <div class="float-right pt-1">
                        <small class="text-muted">8:40 PM</small>
                      </div>
                    </div>
                    <div class="separator-dashed"></div>
                    <div class="d-flex">
                      <div class="avatar avatar-offline">
                        <span
                          class="avatar-title rounded-circle border border-white bg-secondary"
                          >P</span
                        >
                      </div>
                      <div class="flex-1 ml-3 pt-1">
                        <h6 class="text-uppercase fw-bold mb-1">
                          Prabowo Widodo
                          <span class="text-success pl-3">open</span>
                        </h6>
                        <span class="text-muted"
                          >I have some query regarding the license issue.</span
                        >
                      </div>
                      <div class="float-right pt-1">
                        <small class="text-muted">1 Day Ago</small>
                      </div>
                    </div>
                    <div class="separator-dashed"></div>
                    <div class="d-flex">
                      <div class="avatar avatar-away">
                        <span
                          class="avatar-title rounded-circle border border-white bg-danger"
                          >L</span
                        >
                      </div>
                      <div class="flex-1 ml-3 pt-1">
                        <h6 class="text-uppercase fw-bold mb-1">
                          Lee Chong Wei
                          <span class="text-muted pl-3">closed</span>
                        </h6>
                        <span class="text-muted"
                          >Is there any update plan for RTL version near
                          future?</span
                        >
                      </div>
                      <div class="float-right pt-1">
                        <small class="text-muted">2 Days Ago</small>
                      </div>
                    </div>
                    <div class="separator-dashed"></div>
                    <div class="d-flex">
                      <div class="avatar avatar-offline">
                        <span
                          class="avatar-title rounded-circle border border-white bg-secondary"
                          >P</span
                        >
                      </div>
                      <div class="flex-1 ml-3 pt-1">
                        <h6 class="text-uppercase fw-bold mb-1">
                          Peter Parker
                          <span class="text-success pl-3">open</span>
                        </h6>
                        <span class="text-muted"
                          >I have some query regarding the license issue.</span
                        >
                      </div>
                      <div class="float-right pt-1">
                        <small class="text-muted">2 Day Ago</small>
                      </div>
                    </div>
                    <div class="separator-dashed"></div>
                    <div class="d-flex">
                      <div class="avatar avatar-away">
                        <span
                          class="avatar-title rounded-circle border border-white bg-danger"
                          >L</span
                        >
                      </div>
                      <div class="flex-1 ml-3 pt-1">
                        <h6 class="text-uppercase fw-bold mb-1">
                          Logan Paul <span class="text-muted pl-3">closed</span>
                        </h6>
                        <span class="text-muted"
                          >Is there any update plan for RTL version near
                          future?</span
                        >
                      </div>
                      <div class="float-right pt-1">
                        <small class="text-muted">2 Days Ago</small>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    {% include 'includes/scripts.html' %}
    <script>
      (function (d, s, id) {
        if (d.getElementById(id)) {
          if (window.__TOMORROW__) {
            window.__TOMORROW__.renderWidget();
          }
          return;
        }
        const fjs = d.getElementsByTagName(s)[0];
        const js = d.createElement(s);
        js.id = id;
        js.src = "https://www.tomorrow.io/v1/widget/sdk/sdk.bundle.min.js";

        fjs.parentNode.insertBefore(js, fjs);
      })(document, "script", "tomorrow-sdk");
    </script>

    <script>
      $(document).ready(function () {
        // Show the modal when the page is loaded
        $("#exampleModalCenter").modal("show");
      });

      $("#lineChart").sparkline([105, 103, 123, 100, 95, 105, 115], {
        type: "line",
        height: "70",
        width: "100%",
        lineWidth: "2",
        lineColor: "#ffa534",
        fillColor: "rgba(255, 165, 52, .14)",
      });
      var barChart = document.getElementById("barChart").getContext("2d");
      var myBarChart = new Chart(barChart, {
        type: "bar",
        data: {
          labels: [
            "Tur",
            "Rice",
            "Wheat",
            "Soyabean",
            "Gram",
            "Maize",
            "Moong",
            "Cotton",
            "Sugar cane",
          ],
          datasets: [
            {
              label: "Quantity of grains",
              backgroundColor: "rgb(23, 125, 255)",
              borderColor: "rgb(23, 125, 255)",
              data: [3, 2, 9, 5, 4, 6, 4, 6, 7, 8],
            },
          ],
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          scales: {
            yAxes: [
              {
                ticks: {
                  beginAtZero: true,
                },
              },
            ],
          },
        },
      });
      $(document).ready(function () {
        // Show the modal when the page is loaded
        $("#exampleModalCenter").modal("show");

        // Fetch states and populate the first select box
        $.ajax({
          url: "/get_states",
          type: "GET",
          success: function (data) {
            var stateSelect = $("#stateSelect");
            data.states.forEach(function (state) {
              stateSelect.append(
                '<option value="' + state + '">' + state + "</option>"
              );
            });
          },
          error: function (error) {
            console.error("Error fetching states:", error);
          },
        });
	
        // Update districts based on the selected state
        $("#stateSelect").on("change", function () {
          var selectedState = $(this).val();
		  console.log(selectedState)
          var districtSelect = $("#districtSelect");

          // Clear existing options
          districtSelect.empty();

          // Fetch districts for the selected state
          $.ajax({
            url: "/get_districts/" + selectedState,
            type: "GET",
            success: function (data) {
              data.districts.forEach(function (district) {
				console.log(district)
                districtSelect.append(
                  '<option value="' + district + '">' + district + "</option>"
                );
              });
            },
            error: function (error) {
              console.error("Error fetching districts:", error);
            },
          });
        });
      });
    </script>
  </body>
</html>
